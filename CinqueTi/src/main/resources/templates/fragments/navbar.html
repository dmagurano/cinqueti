<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<body>
<div class="header">
       
</div>

<div class="navbar navbar-default" role="navigation" th:fragment="navbar(activeTab)">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" th:href="@{/}">CinqueTi</a>
        </div>
        <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav navbar-left" ng-controller="HeaderCtrl">
        	<li ng-class="{ active: isActive('/')}"><a href="#!/">Informazioni Linee</a></li>
        	<li ng-class="{ active: isActive('/calculate')}"><a href="#!/calculate">Calcolo Percorsi</a></li>
<!--         	<li th:class="${activeTab == 'chat'}? 'active' : null"><a href="">Chat e segnalazioni</a></li> -->
        	<li th:class="${activeTab == 'chat'}? 'active dropdown' : null">
          		<a  class="dropdown-toggle" data-toggle="dropdown">Chat e segnalazioni <b class="caret"></b></a>
          		<ul class="dropdown-menu">
<!-- 	            <li><a href="#">Action</a></li> -->
<!-- 	            <li><a href="#">Another action</a></li> -->
<!-- 	            <li><a href="#">Something else here</a></li> -->
	           		<li th:each="topic : ${topics}"><a th:href="@{/chat(topic=${topic})}" th:text="${topic}"> </a> </li>
	           	</ul>	
	         </li>   
          </ul>
       
        <div class="navbar-collapse collapse row" sec:authorize="isAnonymous()" th:if="${showLogin} == null">
<!--             <div class="col-md-6 col-md-offset-4"> -->
<!--                 <form class="navbar-form navbar-right" role="form" method="POST" th:action="@{/login}"> -->
<!--                     <div class="form-group"> -->
<!--                         <input type="text" class="form-control input-sm" placeholder="Email address" name="username" required="true" autofocus="true"/> -->
<!--                     </div> -->
<!--                     <div class="form-group"> -->
<!--                         <input type="password" class="form-control input-sm" placeholder="Password" name="password" required="true"/> -->
<!--                     </div> -->
<!--                     <button type="submit" class="btn btn-primary btn-sm">Sign in</button> -->
<!--                 </form> -->
<!--             </div> -->
<!--             <div class=""> -->
<!--                 <a class="navbar-brand" th:href="@{/register}">Sign Up</a> -->
<!--             </div> -->
			<ul class="nav navbar-nav navbar-right">
       
        <li class="dropdown">
          <a class="dropdown-toggle" data-toggle="dropdown"><b>Login</b> <span class="caret"></span></a>
			<ul id="login-dp" class="dropdown-menu">
				<li>
					 <div class="row">
							<div class="col-md-12">
								 <form class="form" role="form" method="post" action="login" accept-charset="UTF-8" id="login-nav" th:action="@{/login}">
										<div class="form-group">
											 <label class="sr-only" for="exampleInputEmail2">Email address</label>
											 <input name="username" type="email" class="form-control" id="exampleInputEmail2" placeholder="Email address" required="true"/>
										</div>
										<div class="form-group">
											 <label class="sr-only" for="exampleInputPassword2">Password</label>
											 <input name="password" type="password" class="form-control" id="exampleInputPassword2" placeholder="Password" required="true"/>
<!--                                              <div class="help-block text-right"><a href="">Forget the password ?</a></div> -->
										</div>
										<div class="form-group">
											 <button type="submit" class="btn btn-primary btn-block">Login</button>
										</div>
										
								 </form>
							</div>
							<div class="bottom text-center">
								Nuovo utente? <a th:href="@{/register}"><b>Registrati</b></a>
							</div>
					 </div>
				</li>
				
			</ul>
        </li>
        <li>
			<a th:href="@{/register}"><b>Registrati</b></a>
		</li>
      </ul>
        	</div>
<!--         <div class="navbar-collapse collapse navbar-right" sec:authorize="isAuthenticated()"> -->
<!--             <a class="navbar-brand" th:href="@{/logout}"  >Logout</a> -->
<!--         </div> -->

		<ul class="nav navbar-nav navbar-right">
<!--                 <li th:if="${#authorization.expression('!isAuthenticated()')}"> -->
<!--                     <a href="/login" th:href="@{/login}"> -->
<!--                         <span class="glyphicon glyphicon-log-in" aria-hidden="true"></span>&nbsp;Sign in -->
<!--                     </a> -->
<!--                 </li> -->
<!--                 <li th:if="${#authorization.expression('!isAuthenticated()')}"> -->
<!--                     <a href="/register" th:href="@{/register}"> -->
<!--                         Sign Up -->
<!--                     </a> -->
<!--                 </li> -->
				<li sec:authorize="isAuthenticated()">
					<a href="/profile">
						<span class="glyphicon glyphicon-user" aria-hidden="true"></span>
						<span th:text="'&nbsp;'+${#authentication.name}">&nbsp;User</span>
					</a>
				</li>
                <li sec:authorize="isAuthenticated()">
                    <a href="/logout" th:href="@{#}" onclick="$('#form').submit();">
                        <span class="glyphicon glyphicon-log-out" aria-hidden="true"></span>&nbsp;Logout
                    </a>
                    <form style="visibility: hidden" id="form" method="post" action="#" th:action="@{/logout}"></form>
                </li>
            </ul>
		</div>
    </div>
</div>



</body>
</html>